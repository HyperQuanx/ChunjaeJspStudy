<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%
    // CORS 허용 설정
    response.setHeader("Access-Control-Allow-Origin", "*");
    response.setHeader("Access-Control-Allow-Methods", "GET, POST, OPTIONS");
    response.setHeader("Access-Control-Allow-Headers", "Content-Type");
    response.setHeader("Access-Control-Expose-Headers", "CurrentTime, User-Name, Message, Num, Items");

    // 헤더 설정
    String currentTime = new java.util.Date().toString();
    String name = "한덕용";
    String message = "왜 안와";
    Integer num = 18181818;

    // 배열 설정
    String[] items = {"Apple", "Banana", "Cherry"};

    // 배열을 JSON 문자열로 변환
    StringBuilder itemsJson = new StringBuilder("[");
    for (int i = 0; i < items.length; i++) {
        itemsJson.append("\"").append(items[i]).append("\"");
        if (i < items.length - 1) {
            itemsJson.append(",");
        }
    }
    itemsJson.append("]");

    // 응답 헤더에 값 추가
    response.setHeader("CurrentTime", currentTime);
    response.setHeader("User-Name", name);
    response.setHeader("Message", message);
    response.setIntHeader("Num", num);
    response.setHeader("Items", itemsJson.toString());
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>응답 헤더 테스트</title>
</head>
<body>
    <h2>응답 헤더에 값 추가 완료</h2>

    <!-- JSP에서 설정한 헤더 값 출력 -->
    <p>현재 시간: <%= currentTime %></p>
    <p>사용자 이름: <%= name %></p>
    <p>Message: <%= message %></p>
    <p>Items 배열: <%= itemsJson %></p> <!-- 배열 출력 -->
</body>
</html>
